### jmap命令—导出堆到文件

**导出对象统计信息**

![](/assets/import43.png)

```

 num     #instances         #bytes  class name
----------------------------------------------
   1:           365        2378112  [I
   2:          4731         648136  <methodKlass>
   3:          4731         578128  <constMethodKlass>
   4:           316         354416  <constantPoolKlass>
   5:          7281         325224  <symbolKlass>
   6:           289         250248  <constantPoolCacheKlass>
   7:           316         229088  <instanceKlassKlass>
   8:          1240         125024  [C
   9:           485          89680  [B
  10:           386          40144  java.lang.Class
  11:          1088          34816  java.lang.String
  12:           522          32944  [[I
  13:           475          30368  [S
  14:            41          23944  <objArrayKlassKlass>
  15:           331          14824  [Ljava.lang.Object;
  16:            76           6688  java.lang.reflect.Method
  17:           100           4800  java.nio.HeapByteBuffer
  18:            99           4752  java.nio.HeapCharBuffer
  19:             8           4672  <typeArrayKlassKlass>
  20:            58           4176  java.lang.reflect.Field
  21:           110           2712  [Ljava.lang.Class;
  22:            12           2304  <klassKlass>
  23:            56           2040  [Ljava.lang.String;
  24:            81           1944  java.lang.StringBuilder
  25:            59           1888  java.util.Hashtable$Entry
  26:            20           1664  [Ljava.util.HashMap$Entry;
  27:             7           1640  <methodDataKlass>
  28:            11           1232  java.lang.Thread
  29:            10           1104  [Ljava.util.Hashtable$Entry;
  30:            15            960  java.net.URL
  31:            36            864  java.io.File
  32:            18            864  java.util.HashMap
  33:            16            640  java.util.concurrent.ConcurrentHashMap$Segment
  34:            20            640  java.util.concurrent.ConcurrentHashMap$HashEntry
  35:            19            608  java.util.Locale
  36:            13            520  java.lang.ref.SoftReference
  37:            13            520  java.util.LinkedHashMap$Entry
  38:            13            520  java.io.ObjectStreamField
  39:            16            512  java.util.concurrent.locks.ReentrantLock$NonfairSync
  40:            19            496  [Ljava.util.concurrent.ConcurrentHashMap$HashEntry;
  41:            15            480  java.util.HashMap$Entry
  42:            15            480  java.security.AccessControlContext
  43:             6            432  java.lang.reflect.Constructor
  44:            25            400  java.lang.Object
  45:            16            384  sun.security.action.GetPropertyAction
  46:             2            328  [Ljava.lang.reflect.Method;
  47:             8            320  java.lang.ref.Finalizer
  48:             6            312  [Ljava.lang.reflect.Field;
  49:             6            288  java.util.Hashtable
  50:            11            264  java.io.ExpiringCache$Entry
  51:            11            264  java.lang.StringBuffer
  52:             8            256  java.lang.OutOfMemoryError
  53:             7            224  java.util.Vector
  54:             9            216  java.net.Parts
  55:             9            216  [Ljava.io.ObjectStreamField;
  56:             5            200  sun.nio.cs.ISO_8859_1$Decoder
  57:             7            168  java.io.FileDescriptor
  58:             5            160  java.io.FileInputStream
  59:             4            160  sun.misc.URLClassPath$JarLoader
  60:             3            144  sun.nio.cs.ISO_8859_1$Encoder
  61:             6            144  java.net.URLClassLoader$1
  62:             6            144  java.util.ArrayList
  63:             8            128  java.util.concurrent.atomic.AtomicInteger
  64:             5            120  sun.misc.URLClassPath$3
  65:             1            112  java.lang.ref.Reference$ReferenceHandler
  66:             2            112  java.io.ExpiringCache$1
  67:             2            112  sun.nio.cs.StreamEncoder
  68:             3            112  [Ljava.lang.Thread;
  69:             1            112  java.lang.ref.Finalizer$FinalizerThread
  70:             1            104  sun.net.www.protocol.file.FileURLConnection
  71:             2             96  java.util.StringTokenizer
  72:             3             96  sun.misc.URLClassPath$FileLoader$1
  73:             3             96  java.lang.ref.WeakReference
  74:             4             96  sun.misc.MetaIndex
  75:             3             96  java.util.Stack
  76:             3             96  java.security.CodeSource
  77:             4             96  [Ljava.security.ProtectionDomain;
  78:             3             96  java.lang.NoSuchMethodError
  79:             2             96  java.io.BufferedWriter
  80:             3             96  java.security.PrivilegedActionException
  81:             3             96  java.lang.ClassNotFoundException
  82:             2             96  java.lang.ThreadGroup
  83:             1             80  [Ljava.util.concurrent.ConcurrentHashMap$Segment;
  84:             5             80  java.lang.ThreadLocal
  85:             1             80  [Ljava.lang.ThreadLocal$ThreadLocalMap$Entry;
  86:             2             80  java.io.ExpiringCache
  87:             1             80  sun.misc.Launcher$ExtClassLoader
  88:             3             72  sun.reflect.NativeConstructorAccessorImpl
  89:             3             72  sun.misc.Signal
  90:             3             72  sun.nio.cs.Surrogate$Parser
  91:             3             72  java.lang.RuntimePermission
  92:             1             72  sun.misc.Launcher$AppClassLoader
  93:             3             72  [Ljava.lang.reflect.Constructor;
  94:             3             72  java.lang.Class$1
  95:             4             64  sun.reflect.ReflectionFactory$GetReflectionFactoryAction
  96:             2             64  java.io.FilePermission
  97:             2             64  java.security.Permissions
  98:             2             64  java.io.PrintStream
  99:             2             64  java.lang.ThreadLocal$ThreadLocalMap$Entry
 100:             4             64  java.lang.Class$3
 101:             2             64  java.lang.ref.ReferenceQueue
 102:             2             64  java.lang.ref.ReferenceQueue$Null
 103:             2             64  java.io.OutputStreamWriter
 104:             4             64  java.lang.ref.ReferenceQueue$Lock
 105:             3             64  [Ljava.io.File;
 106:             2             64  java.io.FileOutputStream
 107:             2             64  sun.misc.URLClassPath
 108:             2             56  [Ljava.net.URL;
 109:             1             56  java.lang.Package
 110:             3             48  sun.reflect.DelegatingConstructorAccessorImpl
 111:             1             48  [J
 112:             2             48  sun.misc.NativeSignalHandler
 113:             3             48  java.lang.Boolean
 114:             3             48  java.lang.Integer
 115:             2             48  java.nio.charset.CoderResult
 116:             2             48  java.io.BufferedOutputStream
 117:             1             48  java.io.BufferedReader
 118:             1             48  java.util.Properties
 119:             3             48  com.dreamwin.wowza.monitor.HoldCPUMain$LazyTask
 120:             1             48  sun.nio.cs.StreamDecoder
 121:             3             48  java.nio.charset.CodingErrorAction
 122:             1             48  java.util.concurrent.ConcurrentHashMap
 123:             1             40  sun.nio.cs.StandardCharsets$Aliases
 124:             1             40  sun.nio.cs.StandardCharsets$Classes
 125:             1             40  sun.nio.cs.StandardCharsets$Cache
 126:             1             40  java.security.ProtectionDomain
 127:             1             40  java.io.BufferedInputStream
 128:             1             32  java.util.concurrent.atomic.AtomicReferenceFieldUpdater$AtomicReferenceFieldUpdaterImpl
 129:             1             32  [Ljava.lang.ThreadGroup;
 130:             1             32  java.lang.VirtualMachineError
 131:             1             32  java.util.Collections$SynchronizedMap
 132:             1             32  java.lang.ref.Reference
 133:             2             32  java.util.HashSet
 134:             1             32  java.lang.ClassLoader$NativeLibrary
 135:             2             32  java.io.FilePermission$1
 136:             2             32  sun.net.www.protocol.jar.Handler
 137:             1             32  java.security.BasicPermissionCollection
 138:             1             32  sun.misc.SoftCache
 139:             1             32  java.io.UnixFileSystem
 140:             1             32  sun.nio.cs.StandardCharsets
 141:             1             32  java.lang.NullPointerException
 142:             1             32  java.lang.ArithmeticException
 143:             1             32  [Ljava.lang.OutOfMemoryError;
 144:             1             32  java.util.Random
 145:             2             32  java.nio.ByteOrder
 146:             2             32  sun.reflect.ReflectionFactory$1
 147:             1             24  java.util.Collections$EmptyMap
 148:             1             24  java.security.Policy$UnsupportedEmptyCollection
 149:             1             24  sun.net.www.MessageHeader
 150:             1             24  java.io.FilePermissionCollection
 151:             1             24  java.lang.reflect.ReflectPermission
 152:             1             24  java.lang.ThreadLocal$ThreadLocalMap
 153:             1             24  java.util.BitSet
 154:             1             24  sun.misc.Launcher$AppClassLoader$1
 155:             1             24  java.lang.StringCoding$StringDecoder
 156:             1             24  java.io.FileReader
 157:             1             24  java.lang.StringCoding$StringEncoder
 158:             1             24  sun.nio.cs.ISO_8859_1
 159:             1             24  java.util.concurrent.atomic.AtomicLong
 160:             1             24  sun.misc.URLClassPath$FileLoader
 161:             1             16  java.lang.String$CaseInsensitiveComparator
 162:             1             16  java.util.Collections$ReverseComparator
 163:             1             16  sun.net.www.protocol.file.Handler
 164:             1             16  [Ljava.lang.StackTraceElement;
 165:             1             16  java.lang.Compiler$1
 166:             1             16  java.lang.ClassLoader$3
 167:             1             16  sun.misc.Launcher$ExtClassLoader$1
 168:             1             16  java.security.AccessControlContext$1
 169:             1             16  sun.misc.Launcher
 170:             1             16  java.nio.charset.CoderResult$1
 171:             1             16  sun.misc.Launcher$Factory
 172:             1             16  java.nio.charset.CoderResult$2
 173:             1             16  java.security.ProtectionDomain$2
 174:             1             16  java.lang.SystemClassLoaderAction
 175:             1             16  java.security.ProtectionDomain$Key
 176:             1             16  [Ljava.security.Principal;
 177:             1             16  java.io.FileDescriptor$1
 178:             1             16  com.dreamwin.wowza.monitor.HoldCPUMain$HoldCPUTask
 179:             1             16  [Ljava.security.cert.Certificate;
 180:             1             16  java.lang.System$2
 181:             1             16  java.util.Collections$EmptySet
 182:             1             16  sun.reflect.ReflectionFactory
 183:             1             16  sun.jkernel.DownloadManager$1
 184:             1             16  sun.misc.Unsafe
 185:             1             16  java.lang.ref.Reference$Lock
 186:             1             16  sun.jkernel.DownloadManager$2
 187:             1             16  java.lang.reflect.ReflectAccess
 188:             1             16  java.lang.Runtime
 189:             1             16  java.nio.Bits$1
 190:             1             16  java.util.Hashtable$EmptyEnumerator
 191:             1             16  java.util.Collections$EmptyList
 192:             1             16  java.util.Hashtable$EmptyIterator
 193:             1             16  java.net.URLClassLoader$7
 194:             1             16  java.lang.Terminator$1
 195:             1             16  java.net.UnknownContentHandler
Total         23919        5216080

```

**导出当前堆快照**

![](/assets/import42.png)

